(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-154e733d"],{"2fdb":function(e,t,n){"use strict";var o=n("5ca1"),r=n("d2c8"),a="includes";o(o.P+o.F*n("5147")(a),"String",{includes:function(e){return!!~r(this,e,a).indexOf(e,arguments.length>1?arguments[1]:void 0)}})},5147:function(e,t,n){var o=n("2b4c")("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[o]=!1,!"/./"[e](t)}catch(r){}}return!0}},"53f0":function(e,t,n){},"55fc":function(module,__webpack_exports__,__webpack_require__){"use strict";var _home_sarva_vue_element_nocode_admin_node_modules_babel_runtime_corejs2_core_js_object_keys__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("a4bb"),_home_sarva_vue_element_nocode_admin_node_modules_babel_runtime_corejs2_core_js_object_keys__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_home_sarva_vue_element_nocode_admin_node_modules_babel_runtime_corejs2_core_js_object_keys__WEBPACK_IMPORTED_MODULE_0__),_utils__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("ed08");__webpack_exports__["a"]={data:function(){return{formJson:void 0}},methods:{flattening:function(e,t){var n=this;Object(_utils__WEBPACK_IMPORTED_MODULE_1__["c"])(e)||this.$message.error("对象格式不正确"),Object(_utils__WEBPACK_IMPORTED_MODULE_1__["b"])(e)&&this.$message.error("不支持数组嵌套数组");var o=[];return _home_sarva_vue_element_nocode_admin_node_modules_babel_runtime_corejs2_core_js_object_keys__WEBPACK_IMPORTED_MODULE_0___default()(e).map(function(r){if(Object(_utils__WEBPACK_IMPORTED_MODULE_1__["c"])(e[r]))if(Object(_utils__WEBPACK_IMPORTED_MODULE_1__["b"])(e[r]))e[r].map(function(e,a){var c=t?"".concat(t).concat(r,"[").concat(a,"]."):"".concat(r,"[").concat(a,"]."),i=n.flattening(e,c);o=o.concat(i)});else{var a=t?"".concat(t).concat(r,"."):"".concat(r,"."),c=n.flattening(e[r],a);o=o.concat(c)}else{var i=t?"".concat(t).concat(r):r;o.push({type:"EInputTrim",title:"JSON生成",props:{label:"".concat(e[r]||r),value:i,required:""}})}}),o},gen:function gen(){try{var formData=eval("(".concat(this.formJson,")")),formItems=this.flattening(formData);this.$store.commit("SET_FORMITEMS",formItems)}catch(error){this.$message.error("请填入正确的Object")}}}}},"5aea":function(e,t,n){},6762:function(e,t,n){"use strict";var o=n("5ca1"),r=n("c366")(!0);o(o.P,"Array",{includes:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),n("9c6c")("includes")},"817a":function(e,t,n){"use strict";var o=n("5aea"),r=n.n(o);r.a},"8e8e":function(e,t,n){},"9a1a":function(e,t,n){"use strict";var o=n("8e8e"),r=n.n(o);r.a},ce29:function(e,t,n){"use strict";var o=n("53f0"),r=n.n(o);r.a},d2c8:function(e,t,n){var o=n("aae3"),r=n("be13");e.exports=function(e,t,n){if(o(t))throw TypeError("String#"+n+" doesn't accept regex!");return String(r(e))}},f584:function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",[n("el-aside",{attrs:{width:"300px"}},[n("FormItemAsset"),n("JsonForm")],1),n("el-main",[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:14}},[n("FormItems")],1),n("el-col",{attrs:{span:10}},[n("el-card",{staticClass:"box-card"},[n("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[n("el-tab-pane",{attrs:{label:"表单项属性",name:"item"}},[n("FormItemAttr")],1),n("el-tab-pane",{attrs:{label:"表单属性",name:"form"}},[n("FormAttr",{staticStyle:{"margin-bottom":"10px"}})],1)],1)],1)],1)],1)],1),n("FormCode",{attrs:{form:e.formAttribute,"form-items":e.formItems}})],1)},r=[],a=n("cebc"),c=n("2f62"),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-form",{attrs:{model:e.form,"label-width":"80px"}},[n("el-form-item",{attrs:{label:"表单对象"}},[n("el-input",{attrs:{placeholder:"表单对象"},model:{value:e.form.formObj,callback:function(t){e.$set(e.form,"formObj","string"===typeof t?t.trim():t)},expression:"form.formObj"}})],1),n("el-form-item",{attrs:{label:"更新方法"}},[n("el-input",{attrs:{placeholder:"更新方法"},model:{value:e.form.method,callback:function(t){e.$set(e.form,"method","string"===typeof t?t.trim():t)},expression:"form.method"}})],1),n("el-form-item",{attrs:{label:"表单Ref"}},[n("el-input",{attrs:{placeholder:"表单的Ref值"},model:{value:e.form.ref,callback:function(t){e.$set(e.form,"ref","string"===typeof t?t.trim():t)},expression:"form.ref"}})],1),n("el-form-item",{attrs:{label:"是否验证"}},[n("el-checkbox",{model:{value:e.form.validated,callback:function(t){e.$set(e.form,"validated",t)},expression:"form.validated"}})],1),n("el-form-item",{attrs:{label:"双重确认"}},[n("el-checkbox",{model:{value:e.form.confirmed,callback:function(t){e.$set(e.form,"confirmed",t)},expression:"form.confirmed"}})],1)],1)},l=[],s={data:function(){return{form:{formObj:"defaultFormObj",ref:"defaultRef",validated:!0,confirmed:!1,method:"defaultMethod"}}},watch:{form:{handler:function(e){this.$store.commit("SET_FORM_ATTRIBUTE",Object(a["a"])({},e,{ref:e.validated&&e.ref}))},deep:!0,immediate:!0}}},m=s,u=(n("817a"),n("2877")),f=Object(u["a"])(m,i,l,!1,null,null,null),d=f.exports,p=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-form",{attrs:{model:e.formItemAttribute,"label-width":"80px"}},[n("el-form-item",{attrs:{label:"表单元素"}},[n("el-select",{attrs:{placeholder:"请选择表单元素类型"},on:{change:e.setFormItemAttribute},model:{value:e.formItemElement.type,callback:function(t){e.$set(e.formItemElement,"type",t)},expression:"formItemElement.type"}},e._l(e.input_type_opts,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),n("el-form-item",{attrs:{label:"label"}},[n("el-input",{attrs:{placeholder:"请输入label"},on:{change:e.setFormItemAttribute},model:{value:e.formItemAttribute.label,callback:function(t){e.$set(e.formItemAttribute,"label","string"===typeof t?t.trim():t)},expression:"formItemAttribute.label"}})],1),n("el-form-item",{attrs:{label:"value"}},[n("el-input",{attrs:{placeholder:"请输入value"},on:{change:e.setFormItemAttribute},model:{value:e.formItemAttribute.value,callback:function(t){e.$set(e.formItemAttribute,"value","string"===typeof t?t.trim():t)},expression:"formItemAttribute.value"}})],1),n("el-form-item",{attrs:{label:"数据验证"}},[n("el-checkbox",{attrs:{label:"true"},on:{change:e.setFormItemAttribute},model:{value:e.formItemAttribute.required,callback:function(t){e.$set(e.formItemAttribute,"required",t)},expression:"formItemAttribute.required"}},[e._v("\n      是否必填\n    ")]),n("el-select",{staticStyle:{width:"150px"},attrs:{clearable:"",placeholder:"数据类型",size:"small"},on:{change:e.setFormItemAttribute},model:{value:e.formItemAttribute.type,callback:function(t){e.$set(e.formItemAttribute,"type",t)},expression:"formItemAttribute.type"}},e._l(e.value_type_opts,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1)},b=[],_=[{value:"EInputTrim",label:"输入框 Trim Input"},{value:"EInputNum",label:"输入框 Num Input"},{value:"ECheckbox",label:"复选框 Checkbox"},{value:"ERadio",label:"单选框 Radio"},{value:"ESelect",label:"选择器 Select"},{value:"ESwitch",label:"开关 Switch"}],h=[{value:"url",label:"链接"},{value:"date",label:"时间"},{value:"array",label:"数组"}],v={data:function(){return{input_type_opts:_,value_type_opts:h,idx:0,opt:"",formItemAttribute:{},formItemElement:{}}},computed:Object(a["a"])({},Object(c["b"])(["formItemToHandle"])),watch:{formItemToHandle:function(e){e.added?(this.opt="add",this.idx=e.added.newIndex,this.formItemElement=e.added.element,this.formItemAttribute=Object(a["a"])({},e.added.element.props)):(this.opt="others",this.idx=0,this.formItemAttribute={}),"click"===e.type&&(this.opt="click",this.idx=e.idx,this.formItemElement=e.element,this.formItemAttribute=Object(a["a"])({},e.element.props))}},methods:{setFormItemAttribute:function(){"add"!==this.opt&&"click"!==this.opt||this.$store.commit("UPDATE_FORMITEM_OF_ITEMS",{idx:this.idx,formItem:Object(a["a"])({},this.formItemElement,{props:Object(a["a"])({},this.formItemAttribute)})})}}},I=v,E=Object(u["a"])(I,p,b,!1,null,null,null),g=E.exports,y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-card",{staticClass:"box-card",staticStyle:{"margin-top":"10px"}},e._l(e.forms,function(t,o){return n("span",{key:o},[e._l(t.specs,function(t,o){return[n("el-button",{key:o,staticStyle:{margin:"10px",padding:"10px"},attrs:{round:"",size:"small",plain:""},on:{click:function(n){return e.addFormItem(t)}}},[e._v("\n        "+e._s(t.title)+"\n      ")])]})],2)}),0)},x=[],O={label:"",value:"",required:"",type:""},k={components:{},data:function(){return{forms:[{type:"EInput",title:"Input输入框",specs:[{type:"EInputTrim",title:"Input Trim",props:Object(a["a"])({},O)},{type:"EInputNum",title:"Input Number",props:Object(a["a"])({},O)}]},{type:"ERadio",title:"Radio 单选框",specs:[{type:"ERadio",title:"Radio",props:Object(a["a"])({},O)}]},{type:"ECheckbox",title:"Checkbox 多选框",specs:[{type:"ECheckbox",title:"Checkbox ",props:Object(a["a"])({},O)}]},{type:"ESelect",title:"Select 选择器",specs:[{type:"ESelect",title:"Select",props:Object(a["a"])({},O)}]},{type:"ESwitch",title:"Switch开关",specs:[{type:"ESwitch",title:"Switch ",props:Object(a["a"])({},O)}]}],activeName:["EInput"]}},methods:{addFormItem:function(e){this.$store.commit("ADD_FORMITEM_OF_ITEMS",e)}}},j=k,T=Object(u["a"])(j,y,x,!1,null,null,null),C=T.exports,w=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-card",{staticClass:"box-card"},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("el-button",{staticStyle:{float:"right",padding:"3px 10px"},attrs:{type:"text"},on:{click:e.skipToEditor}},[e._v("\n      在线编辑\n    ")]),n("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:function(t){return e.handleClipboard(e.srcFormCode,t)}}},[e._v("\n      复制代码\n    ")]),n("FileGen")],1),n("div",{staticStyle:{width:"100%"}},[n("el-form",{attrs:{model:e.form,"label-width":"140px"}},[n("draggable",{staticClass:"dragArea list-group",class:{bigDragArea:0===e.formItemsToDrop.length},attrs:{options:{group:"formItemsToDrop"},list:e.formItemsToDrop},on:{change:e.genFormItem}},e._l(e.formItemsToDrop,function(t,o){return n("div",{key:o,staticClass:"list-group-item"},[n("div",{class:{selected:o===e.clickedIndex},on:{click:function(n){return e.genFormItemByClick(o,t)}}},[n("el-form-item",{attrs:{label:t&&t.props.label||"表单label"}},[t?n(t.type,{tag:"component",staticStyle:{width:"90%"}}):e._e()],1),o===e.clickedIndex?n("el-button",{staticStyle:{position:"absolute",top:"10px",right:"-10px"},attrs:{type:"danger",size:"mini",icon:"el-icon-minus"},on:{click:function(t){return e.deleteFormItemByClick(o)}}}):e._e()],1)])}),0)],1)],1)])},F=[],A=n("f499"),$=n.n(A),S=n("310e"),D=n.n(S),M=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:function(t){return e.genLocalFile(e.srcFormCode,t)}}},[e._v("\n  生成代码\n")])},R=[],N=(n("6762"),n("2fdb"),{computed:Object(a["a"])({},Object(c["b"])(["srcFormCode","srcTableCode"]),{srcCode:function(){return console.log("------rcCode -> this.$router",this.$route),this.$route.path.includes("form")?this.srcFormCode:this.$route.path.includes("table")?this.srcTableCode:""}}),methods:{genLocalFile:function(){var e=this;fetch("/api/genlocalfile",{method:"POST",headers:{"Content-Type":"application/json"},body:$()({code:this.srcCode})}).then(function(e){return e.json()}).then(function(t){"success"===t.status&&e.$message.success("生成成功")})}}}),P=N,B=Object(u["a"])(P,M,R,!1,null,null,null),L=B.exports,q=n("ed08"),J={components:{draggable:D.a,FileGen:L},data:function(){return{form:{},formItemsToDrop:[]}},computed:Object(a["a"])({},Object(c["b"])(["clickedIndex","formItems","srcFormCode"])),watch:{formItems:function(e){this.formItemsToDrop=JSON.parse($()(e))}},methods:{genFormItem:function(e){this.$store.commit("SET_FORMITEMS",this.formItemsToDrop),e.added&&(this.$store.commit("SET_CLICKED_INDEX",e.added.newIndex),this.$store.commit("SET_FORMITEM_HANDLE",e))},genFormItemByClick:function(e,t){this.$store.commit("SET_CLICKED_INDEX",e),this.$store.commit("SET_FORMITEM_HANDLE",{type:"click",idx:e,element:t})},deleteFormItemByClick:function(e){this.$store.commit("DELETE_FORM_ITEM",e)},handleClipboard:function(e,t){var n=this;Object(q["a"])(e,t).then(function(){n.$message.success("已经复制到剪贴板")}).catch(function(){n.$message.error("未能复制到剪贴板")})},skipToEditor:function(){this.$router.push("code-editor?code=form")}}},K=J,U=(n("ce29"),Object(u["a"])(K,w,F,!1,null,"30927a10",null)),W=U.exports,z=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-card",{staticClass:"box-card",staticStyle:{"margin-top":"10px"}},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",[e._v(e._s(e.$t("form.JSON")))]),n("el-button",{staticStyle:{float:"right"},attrs:{size:"mini",type:"primary"},on:{click:e.gen}},[e._v("生成表单")])],1),n("el-input",{attrs:{type:"textarea",autosize:{minRows:5},placeholder:"请输入内容, eg:{value:label}，记得给label加上引号"},model:{value:e.formJson,callback:function(t){e.formJson=t},expression:"formJson"}})],1)},H=[],V=n("55fc"),G=V["a"],X=Object(u["a"])(G,z,H,!1,null,null,null),Q=X.exports,Y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"code-container"})},Z=[],ee=function(e,t){return e?"prop='".concat(t,"'"):" "},te=function(e){return function(t,n,o,r){return'\n  <el-form-item label="'.concat(o,'" ').concat(ee(n,r),">\n    ").concat(e(t,r,o),"\n  </el-form-item>\n      ")}},ne=function(e,t,n){return'<el-input v-model.trim="'.concat(e,".").concat(t,"\" placeholder='请输入").concat(n,"'></el-input>")},oe=function(e,t,n){return'<el-input v-model.number="'.concat(e,".").concat(t,"\" type='number' placeholder='请输入").concat(n,"'></el-input>")},re=function(e,t,n){return'\n    <el-select v-model="'.concat(e,".").concat(t,'" placeholder="请选择').concat(n,'">\n      <el-option label="区域二" value="beijing"></el-option>\n    </el-select>')},ae=function(e,t){return'\n  <el-checkbox-group v-model="'.concat(e,".").concat(t,'">\n      <el-checkbox label="第一个复选框" name="type"></el-checkbox>\n      <el-checkbox label="第二个复选框" name="type"></el-checkbox>\n  </el-checkbox-group>')},ce=function(e,t){return'\n    <el-radio-group v-model="'.concat(e,".").concat(t,'">\n      <el-radio label="第一个选项"></el-radio>\n      <el-radio label="第二个选项"></el-radio>\n    </el-radio-group>')},ie=function(e,t){return'<el-switch v-model="'.concat(e,".").concat(t,'"></el-switch>')},le=function(e){var t={EInputTrim:te(ne),EInputNum:te(oe),ESelect:te(re),ECheckbox:te(ae),ERadio:te(ce),ESwitch:te(ie)};return t[e]},se=function(e,t,n,o){return t&&e?"\n    ".concat(o,"(formName) {\n        this.$refs[formName].validate((valid) => {\n          if (valid) {\n            this.$confirm('此操作将永久删除此项, 是否继续?', '提示',\n              {\n                confirmButtonText: '确定',\n                cancelButtonText: '取消',\n                type: 'warning'\n                }).then(await () => {\n                    await ").concat(o,"(this.").concat(n,")\n                    this.$message.success('创建成功')\n                }).catch(() => {\n                  this.$message({\n                    type: 'info',\n                    message: '已取消删除'\n                  });\n              });\n          } else {\n            console.log('error submit!!');\n            return false;\n          }\n      });\n    }").trim():t?"\n    ".concat(o,"(formName) {\n        this.$confirm('此操作将永久删除此项, 是否继续?', '提示',\n        {\n          confirmButtonText: '确定',\n          cancelButtonText: '取消',\n          type: 'warning'\n          }).then(await () => {\n              await ").concat(o,"(this.").concat(n,")\n              this.$message.success('创建成功')\n          }).catch(() => {\n            this.$message({\n              type: 'info',\n              message: '已取消删除'\n            });\n        });\n      }\n    ").trim():e?"\n    ".concat(o,"(formName) {\n        this.$refs[formName].validate(async (valid) => {\n          if (valid) {\n            await ").concat(o,"(this.").concat(n,")\n            this.$message.success('创建成功')\n          } else {\n            console.log('error submit!!');\n            return false;\n          }\n        });\n    }").trim():"\n    async ".concat(o,"(){\n        await ").concat(o,"(this.").concat(n,")\n        this.$message.success('创建成功')\n    }").trim()},me=function(e){return e?":rules='rules'":""},ue=function(e,t){return e?"ref='".concat(t,"'"):" "},fe=function(e,t,n){return n.map(function(n){var o=le(n.type);return o(e,t,n.props.label,n.props.value)}).join("\n")},de=function(e,t,n){return e?" \n    <el-form-item>\n      <el-button size='mini' type='primary' @click=\"".concat(n,"('").concat(t,"')\">创建</el-button>\n    </el-form-item>").trim():"<el-form-item>\n<el-button size='mini' type='primary' @click='".concat(n,"'>创建</el-button>\n</el-form-item>")},pe=function(e,t){var n=t.map(function(e){return"".concat(e.props.value,":''")}).join(",\n          ");return"\n      ".concat(e,":{\n          ").concat(n,"\n      }").trim()},be=function(e,t){if(e){var n=t.filter(function(e){return e.props.required||e.props.type}).map(function(e){var t="ESelect"===e.type?"change":"blur",n="",o="";return e.props.required&&(n="{ required: true, message: '".concat(e.props.label,"必填', trigger: '").concat(t,"' }")),e.props.type&&(o="{ type: '".concat(e.props.type,"', message: '").concat(e.props.label,"格式为").concat(e.props.type,"', trigger: '").concat(t,"' }")),"\n        ".concat(e.props.value,": [\n          ").concat(n,"\n          ").concat(o,"\n        ]").trim()}).join(",\n          ");return"\n      rules:{\n          ".concat(n,"\n      }").trim()}},_e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.formObj,n=e.validated,o=e.ref,r=e.method,a=e.confirmed,c=e.formItems;return'\n<template>\n<el-form :model="'.concat(t,'" ').concat(ue(n,o),"  ").concat(me(n),' label-width="80px">\n  ').concat(fe(t,n,c),"\n  ").concat(de(n,o,r),"\n</el-form>\n</template>\n<script>\n  export default {\n    data() {\n      return {\n        ").concat(pe(t,c),",\n        ").concat(be(n,c),"\n      }\n    },\n    methods: {\n      ").concat(se(n,a,t,r),"\n    }\n  }\n<\/script>\n")},he={data:function(){return{srcCode:"",fromItemsCode:"",refCode:"",formObj:"",dataFormData:{},dataFormRules:{},submitMethods:"",validated:!1}},computed:Object(a["a"])({},Object(c["b"])(["formAttribute","formItems"])),watch:{formAttribute:{handler:function(e){this.genVueFile(e,this.formItems)},deep:!0},formItems:{handler:function(e){this.genVueFile(this.formAttribute,e)},deep:!0}},created:function(){this.genVueFile(this.formAttribute,this.formItems)},methods:{genVueFile:function(e,t){var n={ref:e.ref,formObj:e.formObj,method:e.method,validated:e.validated,confirmed:e.confirmed,formItems:t};this.srcCode=_e(n),this.$store.commit("SET_SRC_FORM_CODE",this.srcCode),window.localStorage.removeItem("vue-element-form-gen-code"),window.localStorage.setItem("vue-element-form-gen-code",this.srcCode)},skipToEdit:function(){window.open("./code-editor","_blank")},openDrawer:function(e){var t=!0;while(!e.matches(".controls")){if(e.matches(".control-0")||e.matches(".control-2")){t=!1;break}e=e.parentNode}return t}}},ve=he,Ie=(n("9a1a"),Object(u["a"])(ve,Y,Z,!1,null,"f44467e8",null)),Ee=Ie.exports,ge={components:{FormAttr:d,FormCode:Ee,JsonForm:Q,FormItemAsset:C,FormItems:W,FormItemAttr:g},data:function(){return{activeName:"item"}},computed:Object(a["a"])({},Object(c["b"])(["formAttribute","formItems","formItem"]))},ye=ge,xe=Object(u["a"])(ye,o,r,!1,null,null,null);t["default"]=xe.exports}}]);
//# sourceMappingURL=chunk-154e733d.48e7050b.js.map